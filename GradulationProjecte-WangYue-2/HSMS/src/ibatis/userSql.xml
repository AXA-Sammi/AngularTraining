<!DOCTYPE sqlMap PUBLIC  "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="user">

	<!-- 根据ID查询Admin对象 -->
	<select id="selectById" resultClass="com.domain.AdminVo">
		SELECT
		id AS id,
		username AS
		username,
		tel AS tel
		FROM admin
		WHERE id=#id#
	</select>

	<select id="selectpatById" resultClass="com.domain.PatientVo">
		SELECT
		id AS id,
		username
		AS username,
		sex AS sex,
		age AS age,
		tel AS tel
		FROM patient
		WHERE id=#id#
	</select>

	<!-- 根据ID查询Doctor对象 -->
	<select id="selectdocById" resultClass="com.domain.DoctorVo">
		SELECT
		id AS id,
		username
		AS username,
		sex AS sex,
		title AS title,
		state AS state,
		age AS age,
		tel AS
		tel
		FROM doctor
		WHERE id=#id#
	</select>

	<!-- 查询所有Admin对象 -->
	<select id="select" resultClass="com.domain.AdminVo">
		SELECT
		id AS id,
		username AS
		username,
		tel AS tel
		FROM admin
	</select>

	<!-- 查询所有Doctor对象 -->
	<select id="selectdoc" resultClass="com.domain.DoctorVo">
		SELECT
		id AS id,
		username AS
		username,
		sex AS sex,
		title AS title,
		state AS state,
		age AS age,
		tel AS
		tel
		FROM doctor
	</select>
	<!-- 查询所有Patient对象 -->
	<select id="selectPat" resultClass="com.domain.PatientVo">
		SELECT
		id AS id,
		username AS
		username,
		sex AS sex,
		age AS age,
		tel AS tel
		FROM patient

	</select>

	<!-- 增加Admin用户 -->
	<insert id="insertA" parameterClass="com.domain.AdminVo">
		INSERT INTO admin (username,passwd,tel)
		VALUES
		(#username#,#password#,#tel#)
		<selectKey resultClass="integer" keyProperty="id">
			SELECT
			@@IDENTITY AS id
		</selectKey>
	</insert>

	<!-- 增加Doctor用户 -->
	<insert id="insertDoctor" parameterClass="com.domain.DoctorVo">
		INSERT INTO doctor (username,passwd,sex,title,state,age,tel)
		VALUES
		(#username#,#password#,#sex#,#title#,#state#,#age#,#tel#)
		<selectKey resultClass="integer" keyProperty="id">
			SELECT
			@@IDENTITY AS id
		</selectKey>
	</insert>

	<!-- 增加Patient用户 -->
	<insert id="insert" parameterClass="com.domain.PatientVo">
		INSERT INTO patient (username,passwd,sex,age,tel)
		VALUES
		(#username#,#password#,#sex#,#age#,#tel#)
		<selectKey resultClass="integer" keyProperty="id">
			SELECT
			@@IDENTITY AS id
		</selectKey>
	</insert>

	<!-- book -->
	<insert id="insertBook" parameterClass="com.domain.BookVo">
		INSERT INTO book (username,sex,age,tel,describe,booktime)
		VALUES
		(#username#,#sex#,#age#,#tel#,#describe#,#booktime#)
		<selectKey resultClass="integer" keyProperty="id">
			SELECT
			@@IDENTITY AS id
		</selectKey>
	</insert>

	<!-- update -->
	<update id="updateA" parameterClass="com.domain.AdminVo">
		UPDATE admin
		SET
		username =
		#username#,
		passwd = #password#
		tel = #tel#
		WHERE id = #id#
	</update>
	<update id="updateD" parameterClass="com.domain.DoctorVo">
		UPDATE doctor
		SET
		username =
		#username#,
		passwd = #password#
		sex = #sex#
		title = #title#
		state =
		#state#
		age = #age#
		tel = #tel#
		WHERE id = #id#
	</update>
</sqlMap>